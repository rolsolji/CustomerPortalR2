<div [@stagger]="true" class="overflow-auto">
    <div fxLayout="row" fxLayout.lt-sm="column" class="ml-2 mt-1" (click)="close('close')">
        <div fxFlex="100%" class="card filters-panel-cont-style">

            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="5px">
                
                <button (click)="search('10')">
                    <div class="defaultStatus">
                        <div class="defaultStatusHeaderRow quotedStatus">
                            Quoted
                        </div>
                        <div class="defaultStatusValueRow">
                            <p>{{totalQuotedStatus}}</p>
                        </div>
                    </div>
                </button>
                
                <button (click)="search('2')">
                    <div class="defaultStatus">
                        <div class="defaultStatusHeaderRow bookedStatus">
                            Booked
                        </div>
                        <div class="defaultStatusValueRow">
                            <p>{{totalBookedStatus}}</p>
                        </div>
                    </div>
                </button>

                <button (click)="search('1')">
                    <div class="defaultStatus">
                        <div class="defaultStatusHeaderRow inTransitStatus">
                            In Transit
                        </div>
                        <div class="defaultStatusValueRow">
                            <p>{{totalInTransitStatus}}</p>
                        </div>
                    </div>
                </button>
                
                <button (click)="search('6')">
                    <div class="defaultStatus">
                        <div class="defaultStatusHeaderRow delivered">
                            Delivered
                        </div>
                        <div class="defaultStatusValueRow">
                            <p>{{totalDeliveredStatus}}</p>
                        </div>
                    </div>
                </button>
            </div>
            
            <div fxLayout="row" fxLayoutAlign="end center" class="py-2 pr-2">           
                <div class="spinnerSection" *ngIf="showSpinner">
                    <div class="center-me">
                      <mat-progress-spinner diameter="50" color="warn" mode="indeterminate"></mat-progress-spinner>
                      <p>Loading...</p>
                    </div>
                </div>
                <div *ngIf=!showSpinner>
                    <button (click)="close('open')" mat-button>
                        <mat-icon [icIcon]="icFilterList"></mat-icon>
                    </button>
                </div>
             
                 <mat-sidenav #searchModal position="end" class="search-container" (click)="close('search')">
                    <button (click)="$event.stopPropagation()">
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Shipper Name</mat-label>
                                <input matInput [(ngModel)]="getQuotesParameters.OrgName" placeholder="">
                            </mat-form-field>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Consignee Name</mat-label>
                                <input matInput [(ngModel)]="getQuotesParameters.DestName" placeholder="">
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayoutGap="5px" class="ml-2 mr-2">
                            <div fxFlex="130px">
                                <mat-form-field appearance="outline">
                                    <mat-label>Ship Date</mat-label>
                                    <input [(ngModel)]="fromShipDate" (click)="shipdatefromDatepickerRef.open()" (focus)="shipdatefromDatepickerRef.open()" name="shipdatefrom"
                                        [matDatepicker]="shipdatefromDatepickerRef" matInput readonly>
                                    <mat-datepicker-toggle [for]="shipdatefromDatepickerRef" matSuffix></mat-datepicker-toggle>
                                    <mat-datepicker #shipdatefromDatepickerRef></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div fxFlex="120px">
                                <mat-form-field appearance="outline">
                                    <mat-label>To</mat-label>
                                    <input [(ngModel)]="toShipDate" (click)="shipdatetoDatepickerRef.open()" (focus)="shipdatetoDatepickerRef.open()" name="shipdateto"
                                    [matDatepicker]="shipdatetoDatepickerRef" matInput readonly>
                                    <mat-datepicker-toggle [for]="shipdatetoDatepickerRef" matSuffix></mat-datepicker-toggle>
                                    <mat-datepicker #shipdatetoDatepickerRef></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayoutGap="5px" class="ml-2 mr-2">
                            <div fxFlex="130px">
                                <mat-form-field appearance="outline">
                                    <mat-label>Delivery Date</mat-label>
                                    <input [(ngModel)]="fromDeliveryDate" (click)="deliverydatefromDatepickerRef.open()" (focus)="deliverydatefromDatepickerRef.open()" name="deliverydatefrom"
                                        [matDatepicker]="deliverydatefromDatepickerRef" matInput readonly>
                                    <mat-datepicker-toggle [for]="deliverydatefromDatepickerRef" matSuffix></mat-datepicker-toggle>
                                    <mat-datepicker #deliverydatefromDatepickerRef></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div fxFlex="120px">
                                <mat-form-field appearance="outline">
                                    <mat-label>To</mat-label>
                                    <input [(ngModel)]="toDeliveryDate" (click)="deliverydatetoDatepickerRef.open()" (focus)="deliverydatetoDatepickerRef.open()" name="deliverydateto"
                                    [matDatepicker]="deliverydatetoDatepickerRef" matInput readonly>
                                    <mat-datepicker-toggle [for]="deliverydatetoDatepickerRef" matSuffix></mat-datepicker-toggle>
                                    <mat-datepicker #deliverydatetoDatepickerRef></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>PO Number</mat-label>
                                <input matInput [(ngModel)]="getQuotesParameters.PONumber" placeholder="">
                            </mat-form-field>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>BOL Number</mat-label>
                                <input matInput [(ngModel)]="getQuotesParameters.LoadNo" placeholder="">
                            </mat-form-field>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Pro Number</mat-label>
                                <input matInput [(ngModel)]="getQuotesParameters.ProNumber" placeholder="">
                            </mat-form-field>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Select Equipment</mat-label>
                                <mat-select [(ngModel)]="getQuotesParameters.EquipmentID">
                                    <mat-option *ngFor="let equipment of EquipmentOptions" [value]="equipment.EquipmentID">{{equipment.Description}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="ml-2 mr-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Select Mode</mat-label>
                                <mat-select [(ngModel)]="getQuotesParameters.Mode">
                                    <mat-option *ngFor="let shipmentmode of ShipmentModeOptions" [value]="shipmentmode.ModeCode">{{shipmentmode.Mode}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                            <div class="ml-2 mr-2">
                                <mat-form-field appearance="outline">
                                    <mat-label>Select Shipment Type</mat-label>
                                    <mat-select [(ngModel)]="getQuotesParameters.ShipmentType">
                                        <mat-option value="ALL">ALL</mat-option>
                                        <mat-option value="International">International</mat-option>
                                        <mat-option value="Domestic">Domestic</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="ml-2 mr-2">
                                <mat-form-field appearance="outline">
                                    <mat-label>Search in Client Lading No/PO Number/Carrier BC</mat-label>
                                    <input matInput [(ngModel)]="getQuotesParameters.FreeSearch" placeholder="">
                                </mat-form-field>
                            </div>
                            <div class="ml-2 mr-2">
                                <mat-form-field appearance="outline">
                                    <mat-label>Select Status</mat-label>
                                    <mat-select multiple [(value)]="statusSelected">
                                        <mat-option *ngFor="let status of StatusOptions" [value]="status">{{status.Status}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="8px" class="py-5 pr-2">
                                <div *ngIf=!showSpinner>
                                    <button (click)="search('')" color="warn" mat-raised-button type="button">Search</button>
                                </div>
                            </div>   

                        </button>
                                         
                 </mat-sidenav>
            </div>
        </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="5px" class="card ml-2 mt-5 grid-container" (click)="close('close')">        
        <div >
            <table [dataSource]="dataSource" class="mat-elevation-z8" mat-table multiTemplateDataRows matSort>
                
                <!-- Action Columns -->
                <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                    <ng-container *ngIf="column.type === 'edit'" [matColumnDef]="column.property">
                        <th *matHeaderCellDef class="grid-header-cell grid-mat-cell-small uppercase" mat-header-cell> {{ column.label }}</th>
                        <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>
                            <button (click)="view($event,row)" mat-icon-button type="button">
                                <mat-icon [icIcon]="baselineEdit" color="lightgray"></mat-icon>
                            </button>
                        </td>
                    </ng-container>
                </ng-container>

                <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                    <ng-container *ngIf="column.type === 'more'" [matColumnDef]="column.property">
                        <th *matHeaderCellDef class="grid-header-cell grid-mat-cell-small uppercase" mat-header-cell> {{ column.label }}</th>
                        <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>
                            <button (click)="more($event,row)" mat-icon-button type="button">
                                <mat-icon [icIcon]="baselineDoubleArrow" color="lightgray"></mat-icon>
                            </button>
                        </td>
                    </ng-container>
                </ng-container>

                <!-- Text Columns -->
                <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                <ng-container *ngIf="column.type === 'text'" [matColumnDef]="column.property">
                    <th *matHeaderCellDef class="grid-mat-cell grid-header-cell uppercase" mat-header-cell mat-sort-header> {{ column.label }}</th>
                    <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>{{ row[column.property] }}</td>
                </ng-container>
                </ng-container>

                <ng-container matColumnDef="expandedDetail">
                    <td mat-cell *matCellDef="let row" [attr.colspan]="visibleColumns.length">
                        <div class="example-element-detail" [@detailExpand]="row == expandedElement ? 'expanded' : 'collapsed'">
                            
                            <div class="spinnerSection" *ngIf="showSpinnerGrid">
                                <div class="center-me">
                                  <mat-progress-spinner diameter="50" color="warn" mode="indeterminate"></mat-progress-spinner>
                                  <p>Loading...</p>
                                </div>
                            </div>
                            
                            <div *ngIf="!showSpinnerGrid" fxLayout="row" fxFlex=100%>
                                <div fxFlex="20%">
                                    <div class="div-container div-container-title">
                                        Origin Terminal
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null"><mat-icon [icIcon]="outlinePhone" color="black"></mat-icon> 
                                            {{ shipmentInformation.OriginTerminalPhone }}</p>   
                                    </div>
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null"><mat-icon [icIcon]="outlineMap" color="black"></mat-icon>
                                            {{ shipmentInformation.OriginTerminalAdd1 }} 
                                            {{ shipmentInformation.OriginTerminalAdd2 }}
                                            {{ shipmentInformation.OriginTerminalCity }}, 
                                            {{ shipmentInformation.OriginTerminalState }}, 
                                            {{ shipmentInformation.OriginTerminalZip }}
                                        </p>
                                    </div>
                                    <hr class="horizontal-separator-line">
                                    <div class="div-container div-container-title">
                                        Destination Terminal
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null"><mat-icon [icIcon]="outlinePhone" color="black"></mat-icon>
                                            {{ shipmentInformation.DestTerminalPhone }}</p>   
                                    </div>
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null"><mat-icon [icIcon]="outlineMap" color="black"></mat-icon>
                                            {{ shipmentInformation.DestTerminalAdd1 }} 
                                            {{ shipmentInformation.DestTerminalAdd2 }}
                                            {{ shipmentInformation.DestTerminalCity }}, 
                                            {{ shipmentInformation.DestTerminalState }}, 
                                            {{ shipmentInformation.DestTerminalZip }}
                                        </p>
                                    </div>
                                </div>
                                <div class="vertical-line"></div>
                                <div fxFlex="20%">
                                    <div class="div-container div-container-title">
                                        Tracking Details
                                    </div>
                                    <hr class="horizontal-title-line">    
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null">Tracking Number: {{shipmentInformation.TrackingNumber}}</p>
                                    </div>
                                </div>
                                <div class="vertical-line"></div>
                                <div fxFlex="20%">
                                    <div class="div-container div-container-title">
                                        Shipping Details
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null">Pro Number:</p>
                                        <p *ngIf="shipmentInformation != null">Pickup Number:</p> 
                                        <p *ngIf="shipmentInformation != null">R2 Ref.No:</p>
                                        <p *ngIf="shipmentInformation != null">Exp Ship Date: {{row.ActualShipDateWithFormat}}</p> 
                                        <p *ngIf="shipmentInformation != null">Actual Ship Date: {{row.ActualShipDateWithFormat}}</p>
                                        <p *ngIf="shipmentInformation != null">Actual Del Date:</p>
                                        <p *ngIf="shipmentInformation != null">Expected Del Date:</p>
                                    </div>
                                </div>
                                <div class="vertical-line"></div>
                                <div fxFlex="20%">
                                    <div class="div-container div-container-title">
                                        References
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container div-container-content">
                                        <p *ngIf="shipmentInformation != null">PO Number:</p>
                                        <p *ngIf="shipmentInformation != null">SO Number:</p> 
                                        <p *ngIf="shipmentInformation != null">GL Code:</p>
                                    </div>
                                    <hr class="horizontal-separator-line">
                                    <div class="div-container div-container-title">
                                        View Related Documents
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div>
                                        <div class="div-container-three-column">
                                            <mat-icon [icIcon]="outlineTextSnippet" color="black">BOL</mat-icon>
                                            <p>BOL</p>
                                        </div>
                                        <div class="div-container-three-column">
                                            <mat-icon [icIcon]="outlineTextSnippet" color="black">POD</mat-icon>
                                            <p>POD</p>
                                        </div>
                                        <div class="div-container-three-column">
                                            <mat-icon [icIcon]="outlineTextSnippet" color="black">OTHER</mat-icon>
                                            <p>OTHER</p>
                                        </div>  
                                    </div>
                                    <div>
                                        <div class="div-container-two-column">
                                            <mat-icon [icIcon]="outlineTextSnippet" color="black">NOTES</mat-icon>
                                            <p>NOTES</p>
                                        </div>
                                        <div class="div-container-two-column">
                                            <mat-icon [icIcon]="outlineTextSnippet" color="black">AUDIT LOG</mat-icon>
                                            <p>AUDIT LOG</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="vertical-line"></div>
                                <div fxFlex="20%">
                                    <div class="div-container div-container-title">
                                        View/Print Documents
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container">
                                        <p><mat-icon [icIcon]="outlinePrint" color="black"></mat-icon>BOL</p>
                                        <p><mat-icon [icIcon]="outlinePrint" color="black"></mat-icon>Shipment Labels</p>
                                    </div>
                                    <hr class="horizontal-separator-line">
                                    <div class="div-container div-container-title">
                                        Email Documents
                                    </div>
                                    <hr class="horizontal-title-line">
                                    <div class="div-container">
                                        <p><mat-icon [icIcon]="outlineEmail" color="black"></mat-icon>BOL</p>
                                        <p><mat-icon [icIcon]="outlineEmail" color="black"></mat-icon>Shipment Labels</p>
                                        <p><mat-icon [icIcon]="outlineEmail" color="black"></mat-icon>Rate Quote</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </ng-container>

                <tr *matHeaderRowDef="visibleColumns" mat-header-row ></tr>
                <tr mat-row
                    *matRowDef="let row; columns: visibleColumns;"
                    class="example-element-row"
                    [class.example-expanded-row]="expandedElement === row"
                    (click)="expandedElement = expandedElement === row ? null : row; GetQuoteInfo(row);">
                </tr>
                <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr> 
            </table>
        </div>
    </div>



</div>

